(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=function t(n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e(this,"enableValidation",(function(){o._setEventListeners()})),e(this,"_setEventListeners",(function(){o._form.addEventListener("input",(function(){o._checkFormValidity()})),o._allInputs.forEach((function(e){e.addEventListener("input",(function(){o._checkInputValidity(e)}))}))})),e(this,"_checkFormValidity",(function(){o._allInputs.some((function(e){return!e.validity.valid}))?o._disableSubmit():o._enableSubmit()})),e(this,"_disableSubmit",(function(){o._button.classList.add(o._inactiveButtonClass),o._button.setAttribute("disabled","disabled")})),e(this,"_enableSubmit",(function(){o._button.classList.remove(o._inactiveButtonClass),o._button.removeAttribute("disabled","disabled")})),e(this,"_checkInputValidity",(function(e){var t=o._getErrorString(e);t.textContent=e.validationMessage,e.validity.valid?o._hideInputError(e,t):o._showInputError(e,t)})),e(this,"_showInputError",(function(e,t){e.classList.add(o._inputErrorClass),t.classList.add(o._errorMessageClass)})),e(this,"_hideInputError",(function(e,t){e.classList.remove(o._inputErrorClass),t.classList.remove(o._errorMessageClass)})),e(this,"_getErrorString",(function(e){return o._form.querySelector(".".concat(e.id,"-error"))})),e(this,"checkFormState",(function(){o._allInputs.forEach((function(e){o._checkFormValidity(e);var t=o._getErrorString(e);o._hideInputError(e,t)}))})),this._form=r,this._submitButtonSelector=n.submitButtonSelector,this._button=r.querySelector(this._submitButtonSelector),this._allInputs=Array.from(r.querySelectorAll(n.inputSelector)),this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._errorMessageClass=n.errorMessageClass};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleCardClick=r,this._handleCardDelete=o,this._handleCardLike=i,this.likes=t.likes,this._userId=a,this.cardId=t._id,this.owner=t.owner}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._like=this._element.querySelector(".element__like"),this._likeCounter=this._element.querySelector(".element__like-counter"),this._cardImage=this._element.querySelector(".element__photo"),this.buttonDeleteCard=this._element.querySelector(".element__delete-icon"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._setEventListeners(),this._element}},{key:"isLiked",value:function(){var e=this;return this.likes.some((function(t){return t._id===e._userId}))}},{key:"_checkOwner",value:function(){this.owner._id!==this._userId&&this.buttonDeleteCard.remove()}},{key:"handleToggleLike",value:function(){this.isLiked()?this._like.classList.add("element__like_active"):this._like.classList.remove("element__like_active")}},{key:"updateLikes",value:function(e){this._likeCounter.textContent=e}},{key:"deleteMePlease",value:function(){this.buttonDeleteCard.closest(".element").remove()}},{key:"_setEventListeners",value:function(){var e=this;this._like.addEventListener("click",(function(){e._handleCardLike(e)})),this.buttonDeleteCard.addEventListener("click",(function(){e._handleCardDelete(e)})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}},{key:"createCard",value:function(){return this._getTemplate(),this.generateCard(),this.handleToggleLike(),this.updateLikes(this.likes.length),this._checkOwner(),this._setEventListeners(),this._element}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"reverseItem",value:function(e){this._container.append(e)}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){var n=t.userNameSelector,r=t.userInfoSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userInfo=document.querySelector(r),this._userAvatar=document.querySelector(o),this._userId=""}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,info:this._userInfo.textContent}}},{key:"setUserInfo",value:function(e,t,n){this._userName.textContent=e,this._userInfo.textContent=t,this._userId=n}},{key:"getUserId",value:function(){return this._userId}},{key:"setUserAvatar",value:function(e){this._userAvatar.src=e}}])&&a(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__button-close"))&&o.close()},(n="_handlerClickClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handlerClickClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handlerClickClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close(this._popup)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("mousedown",this._handlerClickClose)}}])&&c(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function a(e,t){var n,r,o,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(e){e.preventDefault(),n._handlerSubmitForm(n._getInputValues())},(o="_handlerCloseClick")in(r=d(n=i.call(this,e)))?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,n._handlerSubmitForm=t,n._popupForm=n._popup.querySelector(".popup__container"),n._button=n._popup.querySelector(".popup__submit"),n}return t=a,(n=[{key:"_getInputValues",value:function(){this._popupInputs=this._popupForm.querySelectorAll(".popup__input");var e={};return this._popupInputs.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){f(y(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",this._handlerCloseClick)}},{key:"close",value:function(){f(y(a.prototype),"close",this).call(this),this._popupForm.reset(),this._popup.removeEventListener("submit",this._handlerCloseClick)}},{key:"updateTextOnButton",value:function(e){this._button.textContent=e}}])&&p(t.prototype,n),a}(s);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t){var n,r=e.name,o=e.link;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._popupImage=n._popup.querySelector(".popup__image"),n._popupText=n._popup.querySelector(".popup__image-text"),n._link=o,n._name=r,n}return t=a,(n=[{key:"open",value:function(){k(C(a.prototype),"open",this).call(this),this._popupImage.src=this._link,this._popupImage.alt=this._name,this._popupText.textContent=this._name}}])&&b(t.prototype,n),a}(s);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e,t){var n,r,o,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(e){e.preventDefault(),n._handlerSubmitForm(n.card)},(o="_handlerSubmit")in(r=P(n=i.call(this,t)))?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,n._handlerSubmitForm=e,n._formElement=n._popup.querySelector(".popup__container"),n}return t=a,(n=[{key:"open",value:function(e){L(T(a.prototype),"open",this).call(this),this.card=e}},{key:"close",value:function(){L(T(a.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){L(T(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",this._handlerSubmit)}}])&&O(t.prototype,n),a}(s);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=t,this._token=n}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this._link,"/cards"),{headers:{authorization:this._token}}).then(this._checkStatus)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._link,"/users/me"),{headers:{authorization:this._token}}).then(this._checkStatus)}},{key:"updateUserInfo",value:function(e,t){return fetch("".concat(this._link,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then(this._checkStatus)}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this._link,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then(this._checkStatus)}},{key:"_checkStatus",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"addLikeUpdate",value:function(e){return fetch("".concat(this._link,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkStatus)}},{key:"deleteLikeUpdate",value:function(e){return fetch("".concat(this._link,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkStatus)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._link,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._checkStatus)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._link,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(this._checkStatus)}}])&&R(t.prototype,n),e}(),A={formSelector:".popup__container",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error",errorMessageClass:"popup__input-error_visible"},B=document.querySelector(".profile__button-edit"),U=document.querySelector(".profile__add-button"),D=document.querySelector(".profile__overlay"),F=document.querySelector(".popup_type_edit"),N=document.querySelector(".popup_type_add"),V=document.querySelector(".popup_type_update-avatar"),M=F.querySelector(".popup__container"),z=N.querySelector(".popup__container"),J=V.querySelector(".popup__container"),H=document.querySelector(".popup__input_type_name"),$=document.querySelector(".popup__input_type_description");function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=new u({userNameSelector:".profile__name",userInfoSelector:".profile__description",userAvatarSelector:".profile__avatar"}),Q=new t(A,M);Q.enableValidation();var W=new t(A,z);W.enableValidation();var X=new t(A,J);X.enableValidation();var Y=new x("https://mesto.nomoreparties.co/v1/cohort-26","abf7489c-028b-40af-8a54-88899dd941f0"),Z=new q((function(e){Y.deleteCard(e.cardId).then((function(t){"Пост удалён"===t.message&&(e.deleteMePlease(),Z.close())})).catch((function(e){return console.log(e)}))}),".popup_type_delete");function ee(e){Z.open(e),Z.setEventListeners()}function te(e){(e.isLiked()?Y.deleteLikeUpdate(e.cardId):Y.addLikeUpdate(e.cardId)).then((function(t){e.likes=t.likes,e.handleToggleLike(),e.updateLikes(t.likes.length)})).catch((function(e){return console.log(e)}))}function ne(e,t){var n=new w({name:e,link:t},".popup_type_image");n.open(),n.setEventListeners()}function re(e,t){return new r(e,".element-template",ne,ee,te,t).createCard()}Promise.all([Y.getUserInfo(),Y.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1];K.setUserInfo(o.name,o.about,o._id),K.setUserAvatar(o.avatar);var u=new i({renderer:function(e){var t=re(e,o._id);u.reverseItem(t)}},".elements");u.renderItems(a);var c=new v(".popup_type_edit",(function(e){c.updateTextOnButton("Сохранение..."),Y.updateUserInfo(e.authorName,e.authorDescription).then((function(){c.updateTextOnButton("Сохранить"),K.setUserInfo(e.authorName,e.authorDescription),c.close()})).catch((function(e){return console.log(e)}))}));B.addEventListener("click",(function(){var e=K.getUserInfo();H.value=e.name,$.value=e.info,c.open(),Q.checkFormState()})),c.setEventListeners();var s=new v(".popup_type_update-avatar",(function(e){s.updateTextOnButton("Сохранение..."),Y.updateAvatar(e.avatar).then((function(e){s.updateTextOnButton("Сохранить"),K.setUserAvatar(e.avatar),s.close()})).catch((function(e){return console.log(e)}))}));s.setEventListeners(),D.addEventListener("click",(function(){s.open(),X.checkFormState()}));var l=new v(".popup_type_add",(function(e){l.updateTextOnButton("Создание..."),Y.addNewCard(e.name,e.link).then((function(e){l.updateTextOnButton("Создать");var t=re(e,o._id);u.addItem(t),l.close()}))}));l.setEventListeners(),U.addEventListener("click",(function(){l.open(),W.checkFormState()}))})).catch((function(e){return console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8td2VicGFjay8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by13ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzIiwid2VicGFjazovL21lc3RvLXdlYnBhY2svLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8td2VicGFjay8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8td2VicGFjay8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvbk9iaiIsImZvcm0iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfZm9ybSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJfYWxsSW5wdXRzIiwiZm9yRWFjaCIsImlucHV0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2Rpc2FibGVTdWJtaXQiLCJfZW5hYmxlU3VibWl0IiwiX2J1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlIiwicmVtb3ZlQXR0cmlidXRlIiwiZXJyb3JTdHJpbmciLCJfZ2V0RXJyb3JTdHJpbmciLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwid3JvbmdTdHJpbmciLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yTWVzc2FnZUNsYXNzIiwicXVlcnlTZWxlY3RvciIsImlkIiwidGhpcyIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JNZXNzYWdlQ2xhc3MiLCJDYXJkIiwiZGF0YSIsInRlbXBsYXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZERlbGV0ZSIsImhhbmRsZUNhcmRMaWtlIiwidXNlcklkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9oYW5kbGVDYXJkTGlrZSIsImxpa2VzIiwiX3VzZXJJZCIsImNhcmRJZCIsIl9pZCIsIm93bmVyIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfbGlrZSIsIl9saWtlQ291bnRlciIsIl9jYXJkSW1hZ2UiLCJidXR0b25EZWxldGVDYXJkIiwic3JjIiwiYWx0IiwiaXRlbSIsImlzTGlrZWQiLCJsaWtlTGVuZ3RoIiwiY2xvc2VzdCIsImdlbmVyYXRlQ2FyZCIsImhhbmRsZVRvZ2dsZUxpa2UiLCJ1cGRhdGVMaWtlcyIsImxlbmd0aCIsIl9jaGVja093bmVyIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiY2FyZEFyciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYXBwZW5kIiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckluZm9TZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VySW5mbyIsIl91c2VyQXZhdGFyIiwiaW5mbyIsIm5hbWVVcGRhdGUiLCJpbmZvVXBkYXRlIiwiYXZhdGFyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJjbG9zZSIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfaGFuZGxlckNsaWNrQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZXJTdWJtaXRGb3JtIiwicHJldmVudERlZmF1bHQiLCJfaGFuZGxlclN1Ym1pdEZvcm0iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfcG9wdXBGb3JtIiwiX3BvcHVwSW5wdXRzIiwiaW5wdXRzTGlzdCIsInZhbHVlIiwiX2hhbmRsZXJDbG9zZUNsaWNrIiwicmVzZXQiLCJ0ZXh0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRleHQiLCJQb3B1cFdpdGhTdWJtaXQiLCJjYXJkIiwiX2Zvcm1FbGVtZW50IiwiX2hhbmRsZXJTdWJtaXQiLCJBcGkiLCJ0b2tlbiIsIl90b2tlbiIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwiX2NoZWNrU3RhdHVzIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmb3JtU2VsZWN0b3IiLCJlcnJvckNsYXNzIiwiZWRpdEJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJlZGl0QXZhdGFyQnV0dG9uIiwicG9wdXBUeXBlRWRpdCIsInBvcHVwVHlwZUFkZCIsInBvcHVwVHlwZVVwZGF0ZSIsInN1Ym1pdEZvcm1FZGl0Iiwic3VibWl0Rm9ybUFkZCIsInN1Ym1pdEZvcm1VcGRhdGUiLCJpbnB1dE5hbWUiLCJkZXNjcmlwdGlvbklucHV0IiwidXNlckluZm8iLCJ2YWxpZGF0ZUZvcm1FZGl0IiwiZW5hYmxlVmFsaWRhdGlvbiIsInZhbGlkYXRlRm9ybUFkZCIsInZhbGlkYXRlRm9ybVVwZGF0ZUF2YXRhciIsImFwaSIsInBvcHVwRGVsZXRlIiwiZGVsZXRlQ2FyZCIsInJlc3BvbnNlIiwibWVzc2FnZSIsImRlbGV0ZU1lUGxlYXNlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiZGVsZXRlTGlrZVVwZGF0ZSIsImFkZExpa2VVcGRhdGUiLCJwb3B1cEltZyIsImNyZWF0ZUNhcmQiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsInVzZXJEYXRhU2VydmVyIiwiY2FyZHNEYXRhU2VydmVyIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiY2xhc3NTZWN0aW9uIiwicmV2ZXJzZUl0ZW0iLCJyZW5kZXJJdGVtcyIsInBvcHVwRWRpdCIsInVwZGF0ZVRleHRPbkJ1dHRvbiIsInVwZGF0ZVVzZXJJbmZvIiwiYXV0aG9yTmFtZSIsImF1dGhvckRlc2NyaXB0aW9uIiwidXNlckRhdGEiLCJjaGVja0Zvcm1TdGF0ZSIsInBvcHVwVXBkYXRlQXZhdGFyIiwidXBkYXRlQXZhdGFyIiwicG9wdXBBZGQiLCJDYXJkRGF0YSIsImFkZE5ld0NhcmQiLCJuZXdDYXJkIiwiYWRkSXRlbSJdLCJtYXBwaW5ncyI6IitJQUFxQkEsRUFDakIsV0FBWUMsRUFBZUMsR0FBTSxZLDRGQUFBLG9DQVdkLFdBQ2YsRUFBS0Msd0JBWndCLDZCQWdCWixXQUNqQixFQUFLQyxNQUFNQyxpQkFBaUIsU0FBUyxXQUNqQyxFQUFLQyx3QkFFVCxFQUFLQyxXQUFXQyxTQUFRLFNBQUFDLEdBQ3BCQSxF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R0FDckJILEVBQVNsRyxjQUl6QmtHLEVBQVN4QixvQkFDVDFCLG1CQUErQixTQUFTLFdBQ3BDa0QsRUFBU3pCLE9BQ1RaLEVBQWdCa0MsdUJBR3ZCMUIsT0FBTSxTQUFDQyxHQUFELE9BQVNDLFFBQVFDLElBQUlGLE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IodmFsaWRhdGlvbk9iaiwgZm9ybSkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvbk9iai5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9idXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2FsbElucHV0cyA9IEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25PYmouaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uT2JqLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvbk9iai5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JNZXNzYWdlQ2xhc3MgPSB2YWxpZGF0aW9uT2JqLmVycm9yTWVzc2FnZUNsYXNzO1xyXG4gICAgfVxyXG5cclxuLy8g0J3QsNC50LTRkdC8INCy0YHQtSDRhNC+0YDQvNGLINGBINGD0LrQsNC30LDQvdC90YvQvCDQutC70LDRgdGB0L7QvCDQsiBET00sINC00LXQu9Cw0LXQvCDQuNC3INC90LjRhSDQvNCw0YHRgdC40LIg0LzQtdGC0L7QtNC+0LwgQXJyYXkuZnJvbVxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuLy8g0J7QsdGA0LDQsdC+0YLRh9C40Log0L3QsCDQstGB0LUg0LjQvdC/0YPRgtGLXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9hbGxJbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4vLyDQn9GA0L7QstC10YDQutCwINC90LAg0LLQsNC70LjQtNC90L7RgdGC0Ywg0Lgg0LjQt9C80LXQvdC10L3QuNC1INGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LhcclxuICAgIF9jaGVja0Zvcm1WYWxpZGl0eSA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5fYWxsSW5wdXRzLnNvbWUoaW5wdXQgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlU3VibWl0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZW5hYmxlU3VibWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4vLyDQpNGD0L3QutGG0LjQuCDQvtGC0LrQu9GO0YfQtdC90LjRjyDQuCDQstC60LvRjtGH0LXQvdC40Y8g0LrQvdC+0L/QutC4IFwi0YHQvtGF0YDQsNC90LjRgtGMXCJcclxuICAgIF9kaXNhYmxlU3VibWl0ID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgX2VuYWJsZVN1Ym1pdCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICB0aGlzLl9idXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4vLyDQpNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDRj9C10YIg0LLQsNC70LjQtNC90L7RgdGC0Ywg0L/QvtC70Y8g0Lgg0YDQsNCx0L7RgtCw0LXRgiDRgdC+INGB0YLRgNC+0LrQvtC5INC+0YjQuNCx0LrQuFxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVycm9yU3RyaW5nID0gdGhpcy5fZ2V0RXJyb3JTdHJpbmcoaW5wdXQpO1xyXG4gICAgICAgIGVycm9yU3RyaW5nLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCwgZXJyb3JTdHJpbmcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0LCBlcnJvclN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0Lgg0YPQtNCw0LvQtdC90LjQtSDQv9GB0LXQstC00L7QutC70LDRgdGB0L7QsiDRgSDQvtGI0LjQsdC60LDQvNC4INC30LDQv9C+0LvQvdC10L3QuNC5INC40L3Qv9GD0YLQvtCyXHJcbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXQsIHdyb25nU3RyaW5nKSA9PiB7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpOyAvLyDQn9C+0LTRh9GR0YDQutC40LLQsNC90LjQtSDRgdGC0YDQvtC60Lgg0LrRgNCw0YHQvdGL0LxcclxuICAgICAgICB3cm9uZ1N0cmluZy5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yTWVzc2FnZUNsYXNzKTsgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0YLQtdC60YHRgtCwXHJcbiAgICB9XHJcblxyXG4gICAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0LCB3cm9uZ1N0cmluZykgPT4ge1xyXG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICB3cm9uZ1N0cmluZy5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yTWVzc2FnZUNsYXNzKTtcclxuICAgIH1cclxuXHJcbi8vINCk0YPQvdC60YbQuNGPINC/0L7Qu9GD0YfQtdC90LjRjyDQvtGI0LjQsdC60LhcclxuICAgIF9nZXRFcnJvclN0cmluZyA9IChpbnB1dCkgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgfVxyXG5cclxuLy8g0KHQstC10YDQtdC90LjQtSDQvdC10L7QsdGF0L7QtNC40LzQvtCz0L4g0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9C+0LIg0Lgg0YPRgdGC0LDQvdC+0LLQutCwINC90YPQttC90L7Qs9C+INC30L3QsNGH0LXQvdC40Y8g0LrQvdC+0L/QutC4INGB0L7RhdGA0LDQvdC40YLRjFxyXG4gICAgY2hlY2tGb3JtU3RhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fYWxsSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja0Zvcm1WYWxpZGl0eShpbnB1dCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdyb25nU3RyaW5nID0gdGhpcy5fZ2V0RXJyb3JTdHJpbmcoaW5wdXQpO1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCwgd3JvbmdTdHJpbmcpOyAvLyDQntGH0LjRgdGC0LrQsCDQvdCwINCy0YHRj9C60LjQuSDRgdC70YPRh9Cw0LnQvdC+INC+0YIg0YHQvtGF0YDQsNC90LjQstGI0LjRhdGB0Y8g0L7RiNC40LHQvtC6XHJcbiAgICAgICAgfSk7XHJcbiAgICB9fVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUNhcmREZWxldGUsIGhhbmRsZUNhcmRMaWtlLCB1c2VySWQpIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gdGVtcGxhdGU7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUgPSBoYW5kbGVDYXJkRGVsZXRlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XHJcbiAgICAgICAgdGhpcy5saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIHRoaXMuY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5vd25lciA9IGRhdGEub3duZXI7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAgICAgICAuY29udGVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxyXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIC8vINCU0L7QttC00LDRgtGM0YHRjyDQtNC+0LzQuNC90LjRgNGD0Y7RidGD0Y4g0L7RgdC+0LHRjCDQuCDQv9GA0L7QtNC+0LvQttC40YLRjFxyXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICAgICAgLy8g0JfQsNC/0LjRiNC10Lwg0YDQsNC30LzQtdGC0LrRgyDQsiDQv9GA0LjQstCw0YLQvdC+0LUg0L/QvtC70LUgX2VsZW1lbnQuXHJcbiAgICAgICAgLy8g0KLQsNC6INGDINC00YDRg9Cz0LjRhSDRjdC70LXQvNC10L3RgtC+0LIg0L/QvtGP0LLQuNGC0YHRjyDQtNC+0YHRgtGD0L8g0Log0L3QtdC5LlxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2xpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJyk7XHJcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50ZXInKTtcclxuICAgICAgICAvLyDQlNC+0LHQsNCy0LjQvCDQtNCw0L3QvdGL0LVcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waG90bycpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uRGVsZXRlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZS1pY29uJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICAvLyDQktC10YDQvdGR0Lwg0Y3Qu9C10LzQtdC90YIg0L3QsNGA0YPQttGDXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgaXNMaWtlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5saWtlcy5zb21lKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcklkO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrT3duZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3duZXIuX2lkICE9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25EZWxldGVDYXJkLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVUb2dnbGVMaWtlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZS5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVMaWtlcyhsaWtlTGVuZ3RoKSB7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IGxpa2VMZW5ndGg7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRlbGV0ZU1lUGxlYXNlKCkge1xyXG4gICAgICAgIHRoaXMuYnV0dG9uRGVsZXRlQ2FyZC5jbG9zZXN0KCcuZWxlbWVudCcpLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9saWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSh0aGlzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5idXR0b25EZWxldGVDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUNhcmQoKTtcclxuICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZUxpa2UoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxpa2VzKHRoaXMubGlrZXMubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLl9jaGVja093bmVyKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcyhjYXJkQXJyKSB7XHJcbiAgICAgICAgY2FyZEFyci5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZXZlcnNlSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHt1c2VyTmFtZVNlbGVjdG9yLCB1c2VySW5mb1NlbGVjdG9yLCB1c2VyQXZhdGFyU2VsZWN0b3J9KSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySW5mb1NlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBpbmZvOiB0aGlzLl91c2VySW5mby50ZXh0Q29udGVudFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhuYW1lVXBkYXRlLCBpbmZvVXBkYXRlLCBpZCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZVVwZGF0ZTtcclxuICAgICAgICB0aGlzLl91c2VySW5mby50ZXh0Q29udGVudCA9IGluZm9VcGRhdGU7XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlcklkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgICAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW4nKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZXJDbGlja0Nsb3NlKTtcclxuICAgIH07XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbicpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlckNsaWNrQ2xvc2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UodGhpcy5fcG9wdXApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgX2hhbmRsZXJDbGlja0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2J1dHRvbi1jbG9zZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZXJDbGlja0Nsb3NlKTtcclxuICAgIH07XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVyU3VibWl0Rm9ybSkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZXJTdWJtaXRGb3JtID0gaGFuZGxlclN1Ym1pdEZvcm07XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcclxuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cElucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgICAgICAgY29uc3QgaW5wdXRzTGlzdCA9IHt9O1xyXG4gICAgICAgIHRoaXMuX3BvcHVwSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0c0xpc3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gaW5wdXRzTGlzdDtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlckNsb3NlQ2xpY2sgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlclN1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5faGFuZGxlckNsb3NlQ2xpY2spO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5faGFuZGxlckNsb3NlQ2xpY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVRleHRPbkJ1dHRvbih0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioe25hbWUsIGxpbmt9LCBwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9wb3B1cFRleHQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLXRleHQnKTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9wb3B1cFRleHQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoaGFuZGxlclN1Ym1pdEZvcm0sIHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVyU3VibWl0Rm9ybSA9IGhhbmRsZXJTdWJtaXRGb3JtO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKGNhcmQpIHtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICAgICAgdGhpcy5jYXJkID0gY2FyZDtcclxuICAgIH07XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgX2hhbmRsZXJTdWJtaXQgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlclN1Ym1pdEZvcm0odGhpcy5jYXJkKTtcclxuICAgIH07XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVyU3VibWl0KTtcclxuICAgIH07XHJcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKGxpbmssIHRva2VuKSB7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcclxuICAgIH07XHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9saW5rfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbGlua30vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1N0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbGlua30vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICBhYm91dDogYWJvdXRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1N0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTmV3Q2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2xpbmt9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja1N0YXR1cyhyZXMpIHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZExpa2VVcGRhdGUoY2FyZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2xpbmt9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1N0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlTGlrZVVwZGF0ZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbGlua30vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9saW5rfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tTdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUF2YXRhcihhdmF0YXIpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbGlua30vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXI6IGF2YXRhclxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrU3RhdHVzKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uT2JqID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19jb250YWluZXInLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3N1Ym1pdCcsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3N1Ym1pdF9kaXNhYmxlZCcsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yJyxcclxuICAgIGVycm9yTWVzc2FnZUNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX3Zpc2libGUnXHJcbn07XHJcblxyXG5cclxuLy8g0JrQvdC+0L/QvtGH0LrQuFxyXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBlZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX292ZXJsYXknKTtcclxuLy8g0J/RgNC40YHQstCw0LjQstCw0L3QuNC1INC80L7QtNC40YTQuNC60LDRgtC+0YDQvtCyINC/0L7Qv9Cw0L/QsNC8INC00LvRjyDRgNCw0LfQs9GA0LDQvdC40YfQtdC90LjRj1xyXG5leHBvcnQgY29uc3QgcG9wdXBUeXBlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwVHlwZUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2FkZCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBUeXBlVXBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfdXBkYXRlLWF2YXRhcicpO1xyXG4vLyDQmtC90L7Qv9C60Lgg0YHQvtGF0YDQsNC90LjRgtGMXHJcbmV4cG9ydCBjb25zdCBzdWJtaXRGb3JtRWRpdCA9IHBvcHVwVHlwZUVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEZvcm1BZGQgPSBwb3B1cFR5cGVBZGQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEZvcm1VcGRhdGUgPSBwb3B1cFR5cGVVcGRhdGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcclxuLy8g0J/QvtC70Y8g0L/QvtC/0LDQv9CwXHJcbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5leHBvcnQgY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvbicpO1xyXG4vLyDQodC10LvQtdC60YLQvtGA0Ysg0LTQu9GPINC60LvQsNGB0YHQvtCyXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50c1NlbGVjdG9yID0gJy5lbGVtZW50cyc7XHJcbmV4cG9ydCBjb25zdCB1c2VyTmFtZVNlbGVjdG9yID0gJy5wcm9maWxlX19uYW1lJztcclxuZXhwb3J0IGNvbnN0IHVzZXJJbmZvU2VsZWN0b3IgPSAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJztcclxuZXhwb3J0IGNvbnN0IHVzZXJBdmF0YXJTZWxlY3RvciA9ICcucHJvZmlsZV9fYXZhdGFyJztcclxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2VkaXQnO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGRTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9hZGQnO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWdTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9pbWFnZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cERlbGV0ZVN1Ym1pdFNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2RlbGV0ZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFVwZGF0ZUF2YXRhclNlbGVjdG9yID0gJy5wb3B1cF90eXBlX3VwZGF0ZS1hdmF0YXInOyIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoU3VibWl0IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5cclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgdmFsaWRhdGlvbk9iaixcclxuICAgIGVkaXRCdXR0b24sXHJcbiAgICBhZGRDYXJkQnV0dG9uLFxyXG4gICAgc3VibWl0Rm9ybUVkaXQsXHJcbiAgICBzdWJtaXRGb3JtQWRkLFxyXG4gICAgcG9wdXBFZGl0U2VsZWN0b3IsXHJcbiAgICBwb3B1cEFkZFNlbGVjdG9yLFxyXG4gICAgcG9wdXBJbWdTZWxlY3RvcixcclxuICAgIGlucHV0TmFtZSxcclxuICAgIGRlc2NyaXB0aW9uSW5wdXQsXHJcbiAgICBlbGVtZW50c1NlbGVjdG9yLFxyXG4gICAgdXNlck5hbWVTZWxlY3RvcixcclxuICAgIHVzZXJJbmZvU2VsZWN0b3IsXHJcbiAgICB1c2VyQXZhdGFyU2VsZWN0b3IsXHJcbiAgICBwb3B1cERlbGV0ZVN1Ym1pdFNlbGVjdG9yLFxyXG4gICAgcG9wdXBVcGRhdGVBdmF0YXJTZWxlY3RvcixcclxuICAgIGVkaXRBdmF0YXJCdXR0b24sXHJcbiAgICBzdWJtaXRGb3JtVXBkYXRlXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy8g0KLRg9GCINC90LUg0LDRgdGB0LjQvdGF0YDQvtC90L3Ri9C1IE5FV1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7dXNlck5hbWVTZWxlY3RvciwgdXNlckluZm9TZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yfSk7XHJcblxyXG5jb25zdCB2YWxpZGF0ZUZvcm1FZGl0ID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbk9iaiwgc3VibWl0Rm9ybUVkaXQpO1xyXG52YWxpZGF0ZUZvcm1FZGl0LmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHZhbGlkYXRlRm9ybUFkZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25PYmosIHN1Ym1pdEZvcm1BZGQpO1xyXG52YWxpZGF0ZUZvcm1BZGQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgdmFsaWRhdGVGb3JtVXBkYXRlQXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbk9iaiwgc3VibWl0Rm9ybVVwZGF0ZSk7XHJcbnZhbGlkYXRlRm9ybVVwZGF0ZUF2YXRhci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKCdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTI2JywgJ2FiZjc0ODljLTAyOGItNDBhZi04YTU0LTg4ODk5ZGQ5NDFmMCcpO1xyXG5cclxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBXaXRoU3VibWl0KFxyXG4gICAgZnVuY3Rpb24gaGFuZGxlclN1Ym1pdEZvcm0oY2FyZCkge1xyXG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuY2FyZElkKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubWVzc2FnZSA9PT0gXCLQn9C+0YHRgiDRg9C00LDQu9GR0L1cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcmQuZGVsZXRlTWVQbGVhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgfSxcclxuICAgIHBvcHVwRGVsZXRlU3VibWl0U2VsZWN0b3IpO1xyXG5cclxuLy8g0KTQo9Cd0JrQptCY0JggLy9cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZShjYXJkKSB7XHJcbiAgICBwb3B1cERlbGV0ZS5vcGVuKGNhcmQpO1xyXG4gICAgcG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2UoY2FyZCkge1xyXG4gICAgY29uc3QgbGlrZVRvZ2dsZSA9IGNhcmQuaXNMaWtlZCgpID8gYXBpLmRlbGV0ZUxpa2VVcGRhdGUoY2FyZC5jYXJkSWQpIDogYXBpLmFkZExpa2VVcGRhdGUoY2FyZC5jYXJkSWQpO1xyXG4gICAgbGlrZVRvZ2dsZS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjYXJkLmxpa2VzID0gcmVzLmxpa2VzO1xyXG4gICAgICAgIGNhcmQuaGFuZGxlVG9nZ2xlTGlrZSgpO1xyXG4gICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzLmxlbmd0aCk7XHJcbiAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKG5hbWUsIGxpbmspIHtcclxuICAgIGNvbnN0IHBvcHVwSW1nID0gbmV3IFBvcHVwV2l0aEltYWdlKFxyXG4gICAgICAgIHtuYW1lLCBsaW5rfSxcclxuICAgICAgICBwb3B1cEltZ1NlbGVjdG9yKTtcclxuICAgIHBvcHVwSW1nLm9wZW4oKTtcclxuICAgIHBvcHVwSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSwgdXNlcklkKSB7XHJcbiAgICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoZGF0YSwgJy5lbGVtZW50LXRlbXBsYXRlJywgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVDYXJkRGVsZXRlLCBoYW5kbGVDYXJkTGlrZSwgdXNlcklkKTtcclxuICAgIHJldHVybiBuZXdDYXJkLmNyZWF0ZUNhcmQoKTtcclxufVxyXG5cclxuLy8g0J/RgNC+0LzQuNGB0Ysg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDRgSDRgdC10YDQstC10YDQsCDQuCDRgNC10L3QtNC10YDQsCDQtdGRXHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcclxuICAgIC50aGVuKChbdXNlckRhdGFTZXJ2ZXIsIGNhcmRzRGF0YVNlcnZlcl0pID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YVNlcnZlci5uYW1lLCB1c2VyRGF0YVNlcnZlci5hYm91dCwgdXNlckRhdGFTZXJ2ZXIuX2lkKTtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhU2VydmVyLmF2YXRhcik7XHJcbiAgICAgICAgY29uc3QgY2xhc3NTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0sIHVzZXJEYXRhU2VydmVyLl9pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NTZWN0aW9uLnJldmVyc2VJdGVtKGNhcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbGVtZW50c1NlbGVjdG9yKTtcclxuICAgICAgICBjbGFzc1NlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHNEYXRhU2VydmVyKTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9wdXBFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgICAgICAgICAgIHBvcHVwRWRpdFNlbGVjdG9yLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVyU3VibWl0Rm9ybShkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cEVkaXQudXBkYXRlVGV4dE9uQnV0dG9uKCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpO1xyXG4gICAgICAgICAgICAgICAgYXBpLnVwZGF0ZVVzZXJJbmZvKGRhdGEuYXV0aG9yTmFtZSwgZGF0YS5hdXRob3JEZXNjcmlwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwRWRpdC51cGRhdGVUZXh0T25CdXR0b24oJ9Ch0L7RhdGA0LDQvdC40YLRjCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLmF1dGhvck5hbWUsIGRhdGEuYXV0aG9yRGVzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEVkaXQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgICAgICAgICBpbnB1dE5hbWUudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlckRhdGEuaW5mbztcclxuICAgICAgICAgICAgcG9wdXBFZGl0Lm9wZW4oKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVGb3JtRWRpdC5jaGVja0Zvcm1TdGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBvcHVwRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICBjb25zdCBwb3B1cFVwZGF0ZUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwVXBkYXRlQXZhdGFyU2VsZWN0b3IsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXJTdWJtaXRGb3JtKGlucHV0c0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIHBvcHVwVXBkYXRlQXZhdGFyLnVwZGF0ZVRleHRPbkJ1dHRvbign0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKTtcclxuICAgICAgICAgICAgICAgIGFwaS51cGRhdGVBdmF0YXIoaW5wdXRzTGlzdC5hdmF0YXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGlucHV0c0xpc3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBVcGRhdGVBdmF0YXIudXBkYXRlVGV4dE9uQnV0dG9uKCfQodC+0YXRgNCw0L3QuNGC0YwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihpbnB1dHNMaXN0LmF2YXRhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwVXBkYXRlQXZhdGFyLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHBvcHVwVXBkYXRlQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgZWRpdEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgcG9wdXBVcGRhdGVBdmF0YXIub3BlbigpO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUZvcm1VcGRhdGVBdmF0YXIuY2hlY2tGb3JtU3RhdGUoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9wdXBBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAgICAgICAgICAgcG9wdXBBZGRTZWxlY3RvcixcclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlclN1Ym1pdEZvcm0oQ2FyZERhdGEpIHtcclxuICAgICAgICAgICAgICAgIHBvcHVwQWRkLnVwZGF0ZVRleHRPbkJ1dHRvbign0KHQvtC30LTQsNC90LjQtS4uLicpO1xyXG4gICAgICAgICAgICAgICAgYXBpLmFkZE5ld0NhcmQoQ2FyZERhdGEubmFtZSwgQ2FyZERhdGEubGluaylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEFkZC51cGRhdGVUZXh0T25CdXR0b24oJ9Ch0L7Qt9C00LDRgtGMJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXJEYXRhU2VydmVyLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoZGF0YSwgdXNlcklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwQWRkLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcG9wdXBBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICBhZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBwb3B1cEFkZC5vcGVuKCk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlRm9ybUFkZC5jaGVja0Zvcm1TdGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTsiXSwic291cmNlUm9vdCI6IiJ9